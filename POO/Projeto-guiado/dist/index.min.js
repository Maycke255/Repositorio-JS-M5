(()=>{"use strict";function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t(e)}function e(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,o(r.key),r)}}function o(e){var o=function(e){if("object"!=t(e)||!e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var n=o.call(e,"string");if("object"!=t(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==t(o)?o:o+""}function n(t,e){return t.get(function(t,e,o){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:o;throw new TypeError("Private element is not present on this object")}(t,e))}var r=new WeakMap,i=function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),function(t,e,o){(function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")})(t,e),e.set(t,o)}(this,r,{authors:[],users:[],books:[],posters:[],orders:[]})},(o=[{key:"find",value:function(t){return n(r,this)[t]}},{key:"saveAuthor",value:function(t){n(r,this).authors.push(t)}},{key:"findBookByName",value:function(t){return n(r,this).books.find(function(e){return e.name===t})}},{key:"saveBook",value:function(t){this.findBookByName(t.name)||n(r,this).books.push(t)}},{key:"addBooksToStock",value:function(t,e){var o=this.findBookByName(t);null==o||o.addToStock(e)}},{key:"removeBooksToStock",value:function(t,e){var o=this.findBookByName(t);null==o||o.removeToStock(e)}},{key:"findPosterByName",value:function(t){return n(r,this).posters.find(function(e){return e.name===t})}},{key:"savePoster",value:function(t){this.findPosterByName(t.name)||n(r,this).posters.push(t)}},{key:"addPostersToStock",value:function(t,e){var o=this.findPosterByName(t);null==o||o.addToStock(e)}},{key:"removePostersToStock",value:function(t,e){var o=this.findPosterByName(t);null==o||o.removeToStock(e)}},{key:"saveUser",value:function(t){n(r,this).users.find(function(e){return e.email===t.email})||n(r,this).users.push(t)}},{key:"saveOrder",value:function(t){n(r,this).orders.push(t)}},{key:"showStorage",value:function(){console.table(n(r,this).authors),console.table(n(r,this).books),console.table(n(r,this).posters),console.table(n(r,this).users),console.table(n(r,this).orders.map(function(t){return t.data}))}}])&&e(t.prototype,o),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,o}();function u(t){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},u(t)}function a(t,e){for(var o=0;o<e.length;o++){var n=e[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,f(n.key),n)}}function c(t,e,o){return e&&a(t.prototype,e),o&&a(t,o),Object.defineProperty(t,"prototype",{writable:!1}),t}function f(t){var e=function(t){if("object"!=u(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var o=e.call(t,"string");if("object"!=u(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==u(e)?e:e+""}var s=c(function t(e,o,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.name=e,this.nacionality=o,this.bio=n});function l(t){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},l(t)}function y(t,e){for(var o=0;o<e.length;o++){var n=e[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,p(n.key),n)}}function p(t){var e=function(t){if("object"!=l(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var o=e.call(t,"string");if("object"!=l(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==l(e)?e:e+""}var b=function(){return t=function t(e,o,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.name=e,this.description=o,this.price=n,this.inStock=r},(e=[{key:"addToStock",value:function(t){this.inStock+=t}},{key:"removeToStock",value:function(t){this.inStock-=t}}])&&y(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e}();function v(t){return v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},v(t)}function m(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(m=function(){return!!t})()}function h(t){return h=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},h(t)}function d(t,e){return d=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},d(t,e)}var w=function(t){function e(t,o,n){var r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,u=arguments.length>4?arguments[4]:void 0,a=arguments.length>5?arguments[5]:void 0,c=arguments.length>6?arguments[6]:void 0,f=arguments.length>7?arguments[7]:void 0;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=function(t,e,o){return e=h(e),function(t,e){if(e&&("object"==v(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,m()?Reflect.construct(e,o||[],h(t).constructor):e.apply(t,o))}(this,e,["Livro: ".concat(t),o,n,i])).title=t,r.synopsis=u,r.genre=a,r.pages=c,r.author=f,r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&d(t,e)}(e,t),o=e,Object.defineProperty(o,"prototype",{writable:!1}),o;var o}(b);function k(t){return k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},k(t)}function S(t,e){for(var o=0;o<e.length;o++){var n=e[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,g(n.key),n)}}function g(t){var e=function(t){if("object"!=k(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var o=e.call(t,"string");if("object"!=k(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==k(e)?e:e+""}function P(t,e,o){(function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")})(t,e),e.set(t,o)}function j(t,e){return t.get(T(t,e))}function O(t,e,o){return t.set(T(t,e),o),o}function T(t,e,o){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:o;throw new TypeError("Private element is not present on this object")}var _=new WeakMap,B=new WeakMap,E=new WeakMap,C=function(){return t=function t(e,o){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),P(this,_,void 0),P(this,B,void 0),P(this,E,void 0),e.forEach(function(t){var e=t.product;if(t.quantity>e.inStock)throw new Error("Quantidade insuficiente!")}),O(_,this,o),O(B,this,e),O(E,this,e.reduce(function(t,e){var o=e.product,n=e.quantity;return t+o.price*n},0))},(e=[{key:"data",get:function(){return{user:j(_,this),items:j(B,this),total:j(E,this)}}}])&&S(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e}();function A(t){return A="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},A(t)}function N(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(N=function(){return!!t})()}function R(t){return R=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},R(t)}function q(t,e){return q=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},q(t,e)}var M=function(t){function e(t,o,n){var r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,u=arguments.length>4?arguments[4]:void 0,a=arguments.length>5?arguments[5]:void 0;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=function(t,e,o){return e=R(e),function(t,e){if(e&&("object"==A(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,N()?Reflect.construct(e,o||[],R(t).constructor):e.apply(t,o))}(this,e,[t,o,n,i])).height=u,r.width=a,r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&q(t,e)}(e,t),o=e,Object.defineProperty(o,"prototype",{writable:!1}),o;var o}(b);function U(t){return U="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},U(t)}function D(t,e){for(var o=0;o<e.length;o++){var n=e[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,z(n.key),n)}}function W(t,e,o){return e&&D(t.prototype,e),o&&D(t,o),Object.defineProperty(t,"prototype",{writable:!1}),t}function z(t){var e=function(t){if("object"!=U(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var o=e.call(t,"string");if("object"!=U(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==U(e)?e:e+""}var I=W(function t(e,o,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.name=e,this.email=o,this.password=n});function x(t){return x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},x(t)}function F(t,e){for(var o=0;o<e.length;o++){var n=e[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,J(n.key),n)}}function J(t){var e=function(t){if("object"!=x(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var o=e.call(t,"string");if("object"!=x(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==x(e)?e:e+""}var L=function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)},(e=[{key:"createUser",value:function(t,e,o){var n=new I(t,e,o);G._.saveUser(n)}},{key:"getUsers",value:function(){return G._.find("users")}},{key:"createAuthor",value:function(t,e,o){var n=new s(t,e,o);G._.saveAuthor(n)}},{key:"getAuthors",value:function(){return G._.find("authors")}},{key:"createBook",value:function(t,e,o,n,r,i,u,a){var c=new w(t,e,o,n,r,i,u,a);G._.saveBook(c)}},{key:"addBook",value:function(t,e){G._.addBooksToStock(t,e)}},{key:"getBooks",value:function(){return G._.find("books")}},{key:"createPosters",value:function(t,e,o,n,r,i){var u=new M(t,e,o,n,r,i);G._.savePoster(u)}},{key:"addPoster",value:function(t,e){return G._.addPostersToStock(t,e)}},{key:"getPosters",value:function(){return G._.find("posters")}},{key:"createOrder",value:function(t,e){var o=new C(t,e);G._.saveOrder(o),o.data.items.forEach(function(t){var e=t.product,o=t.quantity;e instanceof w?G._.removeBooksToStock(e.name,o):e instanceof M&&G._.removePostersToStock(e.name,o)})}},{key:"getOders",value:function(){return G._.find("orders")}},{key:"showDatabase",value:function(){G._.showStorage()}}])&&F(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e}(),G={_:new i},H=new L;H.createAuthor("H.P. Lovecraft","Rhode Island","..."),H.createAuthor("Ito Junji","Japão","...");var Q=H.getAuthors();H.createBook("O chamado de Cthulhu","...",19.9,60,"...","Terror/Ficção Cíentifica",300,Q[0]),H.createBook("Azatoth","...",24.5,50,"...","Terror/Ficção Cíentifica",230,Q[0]),H.createBook("Tomie","...",30,40,"...","Terror/Psicologico/Mangá/Páginas coloridas",130,Q[1]);var K=H.getBooks();H.createUser("Maycke","may@gmail.com","123456");var V=H.getUsers();H.showDatabase();var X=[{product:K[0],quantity:1},{product:K[1],quantity:2},{product:K[2],quantity:1}];H.createOrder(X,V[0]),H.showDatabase();var Y=H.getOders();console.log("Pedido inteiro:",Y[0]),console.log("Getter data:",Y[0].data),console.log("Items:",Y[0].data.items)})();